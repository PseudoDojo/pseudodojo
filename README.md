# Pseudo Dojo

WORK IN PROGRESS

An open source python package to generate and validate pseudopotentials.

## About

Pseudo Dojo collects the latest approximations of the core electrons of each element, for use in Density Functional Theory (DFT), as well as providing a suite of tools for generating and testing new pseudopotentials. Seven tests are currently provided, executed using the [ABINIT](https://www.abinit.org/) software package:

- Delta guage
- Revised Delta Guage
- GBRV
- Tests for FCC/BCC/compounds
- Phonons at the gamma point
- Tests for presence of ghosts states both above and below the Fermi level

Barring the ghost and compound validations, each of these tests are performed as a function of the energy cutoff, where the outcome may provide hints for the energy cutoff in downstream calculations. Results of each test are tracked and stored in a `djrepo` TODO UPDATE? file, allowing high throughput validation of many pseudopotentials to be performed. 

This codebase is stored on github, with a web interface provided at [the Pseudo Dojo website](http://www.pseudo-dojo.org/). The latest stable release is hosted on [PyPi](https://pypi.org/project/pseudodojo/) for use in python scripts, recommended installation is via [poetry](https://python-poetry.org/) within a python virtual environment:

```bash
$ poetry init # Will create a new pyproject.toml if not already present
$ poetry add pseudodojo
$ poetry shell
```

Alternatively, via pip:

```bash
$ pip install pseudodojo
```

## Using Pseudo Dojo

### Web App

To run the web interface for PseudoDojo locally requires some environment variables setting.

A github API access key must be generated by going to Settings -> Developer settings -> Personal Access Tokens -> Tokens (classic) -> Generate New Token. Then create a read only token for public repositories, and choose your desired expiration date. 

Copy the generated key, and set this as an environment variable via the command 

```bash
export GITHUB_READONLY_TOKEN="CodePresentedByGitHub"
```

Making sure to store your key in a secure manner.

Another environment variable must be set, `PSEUDODOJO_SECRET_KEY`, which may be generated via the command 

```bash
openssl rand -base64 32
export PSEUDODOJO_SECRET_KEY="KeyFromOpenSsl"
```

Once these environment variables are set, create and activate a python virtual environment and install the `poetry` package. Install the remaining dependencies and launch the app via the commands:

```bash
poetry update
cd webapp
python run.py
```

## License

All pseudopotentials and their associated input files are released under a [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/legalcode) license, which allows them to be used, modified, and distributed in personal, academic, and commercial applications as long as the Pseudo Dojo project is credited for the original creation.

The Pseudo Dojo source code is released under a [GPL v2](https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.html) license, which allows for the redistribution and modification of the code in both free and commercial software, as long as all modifications to the code are also freely distributed under a GPL license. Please read the linked license file for full terms of use.
